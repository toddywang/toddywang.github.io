<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>localstorage | 小T在加油</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="IndexedDB介绍 IndexedDB是HTML5规范里新出现的浏览器里内置的数据库。对于在浏览器里存储数据，你可以使用cookies或local storage，但它们都是比较简单的技术，而IndexedDB提供了类似数据库风格的数据存储和使用方式。存储在IndexedDB里的数据是永久保存，不像cookies那">
<meta name="keywords" content="技术文档">
<meta property="og:type" content="article">
<meta property="og:title" content="localstorage">
<meta property="og:url" content="http://toddy.wang/2016/07/01/Local-Storage/index.html">
<meta property="og:site_name" content="小T在加油">
<meta property="og:description" content="IndexedDB介绍 IndexedDB是HTML5规范里新出现的浏览器里内置的数据库。对于在浏览器里存储数据，你可以使用cookies或local storage，但它们都是比较简单的技术，而IndexedDB提供了类似数据库风格的数据存储和使用方式。存储在IndexedDB里的数据是永久保存，不像cookies那样只是临时的。IndexedDB里提供了查询数据的功能，在online和offl">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-10-27T09:31:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="localstorage">
<meta name="twitter:description" content="IndexedDB介绍 IndexedDB是HTML5规范里新出现的浏览器里内置的数据库。对于在浏览器里存储数据，你可以使用cookies或local storage，但它们都是比较简单的技术，而IndexedDB提供了类似数据库风格的数据存储和使用方式。存储在IndexedDB里的数据是永久保存，不像cookies那样只是临时的。IndexedDB里提供了查询数据的功能，在online和offl">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">小T在加油</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">主页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/wechatlogo.jpeg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">主页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/wechatlogo.jpeg" />
            <h2 id="name">Toddy</h2>
            <h3 id="title">Web Front-End Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>ChengDu, China</span>
            <a id="follow" target="_blank" href="https://github.com/toddywang/">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                17
                <span>文章</span>
            </div>
            <div class="article-info-block">
                6
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/toddywang/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-Local-Storage" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            localstorage
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2016/07/01/Local-Storage/">
            <time datetime="2016-07-01T02:38:39.000Z" itemprop="datePublished">2016-07-01</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/技术文档/">技术文档</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        王阳
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="IndexedDB介绍"><a href="#IndexedDB介绍" class="headerlink" title="IndexedDB介绍"></a>IndexedDB介绍</h2><blockquote>
<p>IndexedDB是HTML5规范里新出现的浏览器里内置的数据库。对于在浏览器里存储数据，你可以使用cookies或local storage，但它们都是比较简单的技术，而IndexedDB提供了类似数据库风格的数据存储和使用方式。存储在IndexedDB里的数据是永久保存，不像cookies那样只是临时的。IndexedDB里提供了查询数据的功能，在online和offline模式下都能使用。你可以用IndexedDB存储大型数据。</p>
<p>IndexedDB里数据以对象的形式存储，每个对象都有一个key值索引。IndexedDB里的操作都是事务性的。一种对象存储在一个objectStore里，objectStore就相当于关系数据库里的表。<strong>IndexedDB</strong>可以有很多<strong>objectStore</strong>，<strong>objectStore</strong>里可以有很多对象。每个对象可以用key值获取。</p>
</blockquote>
<h2 id="IndexedDB-vs-LocalStorage"><a href="#IndexedDB-vs-LocalStorage" class="headerlink" title="IndexedDB vs LocalStorage"></a>IndexedDB vs LocalStorage</h2><blockquote>
<p><strong>IndexedDB</strong>和<strong>LocalStorage</strong>都是用来在浏览器里存储数据，但它们使用不同的技术，有不同的用途，你需要根据自己的情况适当的选择使用哪种。<strong>LocalStorage</strong>是用key-value键值模式存储数据，但跟<strong>IndexedDB</strong>不一样的是，它的数据并不是按对象形式存储。它存储的数据都是字符串形式。如果你想让<strong>LocalStorage</strong>存储对象，你需要借助<strong>JSON.stringify()</strong>能将对象变成字符串形式，再用<strong>JSON.parse()</strong>将字符串还原成对象。但如果要存储大量的复杂的数据，这并不是一种很好的方案。毕竟，<strong>localstorage</strong>就是专门为小数量数据设计的，它的api是<strong>同步</strong>的。</p>
<p>IndexedDB很适合存储大量数据，它的API是<strong>异步调用</strong>的。<strong>IndexedDB</strong>使用索引存储数据，各种数据库操作放在事务中执行。<strong>IndexedDB</strong>甚至还支持简单的数据类型。<strong>IndexedDB</strong>比<strong>localstorage</strong>强大得多，但它的API也相对复杂。</p>
<p>对于简单的数据，你应该继续使用<strong>localstorage</strong>，但当你希望存储大量数据时，<strong>IndexedDB</strong>会明显的更适合，<strong>IndexedDB</strong>能提供你更为复杂的查询数据的方式。</p>
</blockquote>
<h2 id="IndexedDB-vs-Web-SQL"><a href="#IndexedDB-vs-Web-SQL" class="headerlink" title="IndexedDB vs Web SQL"></a>IndexedDB vs Web SQL</h2><blockquote>
<p><strong>WebSQL</strong>也是一种在浏览器里存储数据的技术，跟<strong>IndexedDB</strong>不同的是，<strong>IndexedDB</strong>更像是一个<strong>NoSQL</strong>数据库，而<strong>WebSQL</strong>更像是<strong>关系型数据库</strong>，使用SQL查询数据。W3C已经不再支持这种技术。具体情况请看：<a href="http://www.w3.org/TR/webdatabase" target="_blank" rel="noopener">http://www.w3.org/TR/webdatabase/</a>。</p>
<p>因为不再支持，所以你就不要在项目中使用这种技术了。</p>
</blockquote>
<h2 id="IndexedDB-vs-Cookies"><a href="#IndexedDB-vs-Cookies" class="headerlink" title="IndexedDB vs Cookies"></a>IndexedDB vs Cookies</h2><blockquote>
<p><strong>Cookies(小甜点)</strong>听起来很好吃，但实际上并不是。每次HTTP接受和发送都会传递Cookies数据，它会占用额外的流量。例如，如果你有一个<strong>10KB</strong>的Cookies数据，发送10次请求，那么，总计就会有100KB的数据在网络上传输。<strong>Cookies</strong>只能是<strong>字符串</strong>。浏览器里存储Cookies的<strong>空间有限</strong>，很多用户禁止浏览器使用Cookies。所以，Cookies只能用来存储<strong>小量的非关键的</strong>数据。</p>
</blockquote>
<h2 id="IndexedDB的用法"><a href="#IndexedDB的用法" class="headerlink" title="IndexedDB的用法"></a>IndexedDB的用法</h2><blockquote>
<p>想要理解IndexedDB，最好的方法是创建一个简单的web应用：把一个班的学生的学号和姓名存储在IndexedDB里。IndexedDB里提供了简单的<strong>增、删、改、查</strong>接口。</p>
</blockquote>
<h2 id="打开一个IndexedDB数据库"><a href="#打开一个IndexedDB数据库" class="headerlink" title="打开一个IndexedDB数据库"></a>打开一个IndexedDB数据库</h2><blockquote>
<p>首先，你需要知道你的浏览器是否支持IndexedDB。请使用最新版的谷歌浏览器或火狐浏览器。低版本的IE是不行的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.indexedDB = <span class="built_in">window</span>.indexedDB || <span class="built_in">window</span>.mozIndexedDB || <span class="built_in">window</span>.webkitIndexedDB || <span class="built_in">window</span>.msIndexedDB;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">window</span>.indexedDB)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"你的浏览器不支持IndexedDB"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>一旦你的浏览器支持IndexedDB，我们就可以打开它。你不能直接打开IndexedDB数据库。IndexedDB需要你创建一个请求来打开它。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="built_in">window</span>.indexedDB.open(<span class="string">"testDB"</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure></p>
<p>第一个参数是数据库的名称，第二个参数是数据库的版本号。版本号可以在升级数据库时用来调整数据库结构和数据。</p>
<p>但你增加数据库版本号时，会触发onupgradeneeded事件，这时可能会出现成功、失败和阻止事件三种情况。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db;</span><br><span class="line">request.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"打开DB失败"</span>, event);</span><br><span class="line">&#125;</span><br><span class="line">request.onupgradeneeded   = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Upgrading"</span>);</span><br><span class="line">    db = event.target.result;</span><br><span class="line">    <span class="keyword">var</span> objectStore = db.createObjectStore(<span class="string">"students"</span>, &#123; <span class="attr">keyPath</span> : <span class="string">"rollNo"</span> &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">request.onsuccess  = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"成功打开DB"</span>);</span><br><span class="line">    db = event.target.result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>onupgradeneeded事件在第一次打开页面初始化数据库时会被调用，或在当有版本号变化时。所以，你应该在onupgradeneeded函数里创建你的存储数据。如果没有版本号变化，而且页面之前被打开过，你会获得一个onsuccess事件。如果有错误发生时则触发onerror事件。如果你之前没有关闭连接，则会触发onblocked事件。</p>
<p>在上面的代码片段里，我们创建了一个Object Store，叫做“students”，用“rollNo”做数据键名。</p>
</blockquote>
<h2 id="往ObjectStore里新增对象"><a href="#往ObjectStore里新增对象" class="headerlink" title="往ObjectStore里新增对象"></a>往ObjectStore里新增对象</h2><blockquote>
<p>为了往数据库里新增数据，我们首先需要创建一个事务，并要求具有读写权限。在indexedDB里任何的存取对象的操作都需要放在事务里执行。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> transaction = db.transaction([<span class="string">"students"</span>],<span class="string">"readwrite"</span>);</span><br><span class="line">transaction.oncomplete = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Success"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">transaction.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Error"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> objectStore = transaction.objectStore(<span class="string">"students"</span>);</span><br><span class="line"></span><br><span class="line">objectStore.add(&#123;<span class="attr">rollNo</span>: rollNo, <span class="attr">name</span>: name&#125;);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="从ObjectStore里删除对象"><a href="#从ObjectStore里删除对象" class="headerlink" title="从ObjectStore里删除对象"></a>从ObjectStore里删除对象</h2><blockquote>
<p>删除跟新增一样，需要创建事务，然后调用删除接口，通过key删除对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.transaction([<span class="string">"students"</span>],<span class="string">"readwrite"</span>).objectStore(<span class="string">"students"</span>).delete(rollNo);</span><br></pre></td></tr></table></figure></p>
<p>我把语句合并到了一起，变得更简单，但效果是一样的。</p>
</blockquote>
<h2 id="通过key取出对象"><a href="#通过key取出对象" class="headerlink" title="通过key取出对象"></a>通过key取出对象</h2><blockquote>
<p>往get()方法里传入对象的key值，取出相应的对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = db.transaction([<span class="string">"students"</span>],<span class="string">"readwrite"</span>).objectStore(<span class="string">"students"</span>).get(rollNo);</span><br><span class="line">request.onsuccess = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Name : "</span>+request.result.name);    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="更新一个对象"><a href="#更新一个对象" class="headerlink" title="更新一个对象"></a>更新一个对象</h2><blockquote>
<p>为了更新一个对象，首先要把它取出来，修改，然后再放回去。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> transaction = db.transaction([<span class="string">"students"</span>],<span class="string">"readwrite"</span>);</span><br><span class="line"><span class="keyword">var</span> objectStore = transaction.objectStore(<span class="string">"students"</span>);</span><br><span class="line"><span class="keyword">var</span> request = objectStore.get(rollNo);</span><br><span class="line">request.onsuccess = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Updating : "</span>+request.result.name + <span class="string">" to "</span> + name);</span><br><span class="line">    request.result.name = name;</span><br><span class="line">    objectStore.put(request.result);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><blockquote>
<p>为大家更加好的了解整体，下面贴出完整代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.indexedDB = <span class="built_in">window</span>.indexedDB || <span class="built_in">window</span>.mozIndexedDB || <span class="built_in">window</span>.webkitIndexedDB || <span class="built_in">window</span>.msIndexedDB;</span><br><span class="line">    <span class="keyword">var</span> request, db;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">window</span>.indexedDB) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Your Browser does not support IndexedDB"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        request = <span class="built_in">window</span>.indexedDB.open(<span class="string">"testDB"</span>, <span class="number">2</span>);</span><br><span class="line">        request.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"Error opening DB"</span>, event);</span><br><span class="line">        &#125;;</span><br><span class="line">        request.onupgradeneeded = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"Upgrading"</span>);</span><br><span class="line">            db = event.target.result;</span><br><span class="line">            <span class="keyword">var</span> objectStore = db.createObjectStore(<span class="string">"students"</span>, &#123;<span class="attr">keyPath</span>: <span class="string">"rollNo"</span>&#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"Success opening DB"</span>);</span><br><span class="line">            db = event.target.result;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#addBtn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> name = $(<span class="string">"#name"</span>).val();</span><br><span class="line">        <span class="keyword">var</span> rollNo = $(<span class="string">"#rollno"</span>).val();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> transaction = db.transaction([<span class="string">"students"</span>], <span class="string">"readwrite"</span>);</span><br><span class="line">        transaction.oncomplete = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"Success :)"</span>);</span><br><span class="line">            $(<span class="string">"#result"</span>).html(<span class="string">"Add : Success"</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        transaction.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"Error :("</span>);</span><br><span class="line">            $(<span class="string">"#result"</span>).html(<span class="string">"Add : Error"</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">var</span> objectStore = transaction.objectStore(<span class="string">"students"</span>);</span><br><span class="line"></span><br><span class="line">        objectStore.add(&#123;<span class="attr">rollNo</span>: rollNo, <span class="attr">name</span>: name&#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#removeBtn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rollNo = $(<span class="string">"#rollno"</span>).val();</span><br><span class="line">        db.transaction([<span class="string">"students"</span>], <span class="string">"readwrite"</span>).objectStore(<span class="string">"students"</span>).delete(rollNo);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#getBtn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rollNo = $(<span class="string">"#rollno"</span>).val();</span><br><span class="line">        <span class="keyword">var</span> request = db.transaction([<span class="string">"students"</span>], <span class="string">"readwrite"</span>).objectStore(<span class="string">"students"</span>).get(rollNo);</span><br><span class="line">        request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            $(<span class="string">"#result"</span>).html(<span class="string">"Name : "</span> + request.result.name);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#updateBtn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rollNo = $(<span class="string">"#rollno"</span>).val();</span><br><span class="line">        <span class="keyword">var</span> name = $(<span class="string">"#name"</span>).val();</span><br><span class="line">        <span class="keyword">var</span> transaction = db.transaction([<span class="string">"students"</span>], <span class="string">"readwrite"</span>);</span><br><span class="line">        <span class="keyword">var</span> objectStore = transaction.objectStore(<span class="string">"students"</span>);</span><br><span class="line">        <span class="keyword">var</span> request = objectStore.get(rollNo);</span><br><span class="line">        request.onsuccess = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            $(<span class="string">"#result"</span>).html(<span class="string">"Updating : "</span> + request.result.name + <span class="string">" to "</span> + name);</span><br><span class="line">            request.result.name = name;</span><br><span class="line">            objectStore.put(request.result);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><a href="https://tc-flight-int-web.github.io/localstorage-ppt/" target="_blank" rel="noopener">PPT演示地址</a>;<a href="https://tc-flight-int-web.github.io/localstorage-demo" target="_blank" rel="noopener">DEMO演示地址</a>。如果有任何的问题，请留言。</p>
</blockquote>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/10/27/2017-10-27-babel-简介/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    Babel 介绍
                
            </div>
        </a>
    
    
        <a href="/2016/06/23/Hexo书写博客/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">Hexo书写博客</div>
        </a>
    
</nav>


    
</article>


    
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/11/24/前端Date-now问题分析以及解决方案/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/11/24/前端Date-now问题分析以及解决方案/" class="title">前端Date.now问题分析以及解决方案</a></p>
                            <p class="item-date"><time datetime="2017-11-24T07:44:02.000Z" itemprop="datePublished">2017-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/11/21/lodash/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/11/21/lodash/" class="title">lodash 解析</a></p>
                            <p class="item-date"><time datetime="2017-11-21T10:27:37.000Z" itemprop="datePublished">2017-11-21</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/11/14/1.[reading]express参数过滤/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/11/14/1.[reading]express参数过滤/" class="title">express参数过滤</a></p>
                            <p class="item-date"><time datetime="2017-11-14T09:05:50.000Z" itemprop="datePublished">2017-11-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/11/07/2.[算法]为什么每天学习一点算法/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/11/07/2.[算法]为什么每天学习一点算法/" class="title">为什么每天学习一点算法</a></p>
                            <p class="item-date"><time datetime="2017-11-07T07:47:48.000Z" itemprop="datePublished">2017-11-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/11/07/2.[算法]每天学习一点算法/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/11/07/2.[算法]每天学习一点算法/" class="title">每天学习一点算法</a></p>
                            <p class="item-date"><time datetime="2017-11-07T07:46:13.000Z" itemprop="datePublished">2017-11-07</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习一点算法/">学习一点算法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术文档/">技术文档</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书笔记/">读书笔记</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a><span class="tag-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/lodash/" style="font-size: 10px;">lodash</a> <a href="/tags/学习一点算法/" style="font-size: 13.33px;">学习一点算法</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/技术文档/" style="font-size: 16.67px;">技术文档</a> <a href="/tags/读书笔记/" style="font-size: 20px;">读书笔记</a> <a href="/tags/随笔/" style="font-size: 16.67px;">随笔</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Toddy<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>